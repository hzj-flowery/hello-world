--bout_info

-- key
local __key_map = {
  id = 1,    --id-int 
  point = 2,    --阵位点-int 
  point_type = 3,    --阵位类型-int 
  attribute_type_1 = 4,    --属性类型-int 
  attribute_value_1 = 5,    --属性值-int 
  position = 6,    --阵位坐标-string 
  all_combat = 7,    --假战力-int 
  cost_hero1 = 8,    --消耗武将1-int 
  cost_hero1_num = 9,    --消耗武将1数量-int 
  cost_hero2 = 10,    --消耗武将2-int 
  cost_hero2_num = 11,    --消耗武将2数量-int 
  cost_hero3 = 12,    --消耗武将3-int 
  cost_hero3_num = 13,    --消耗武将3数量-int 
  cost_yubi = 14,    --消耗玉璧-int 
  point_name = 15,    --阵位名字-string 

}

-- data
local bout_info = {
    _data = {
        [1] = {1,1,1,7,15000,"907|462",720000,107,2,108,2,111,2,0,"先锋",},
        [2] = {1,2,1,6,1000,"1005|323",720000,207,2,208,2,210,2,0,"中军",},
        [3] = {1,3,1,18,80,"928|174",720000,309,2,310,2,307,2,0,"后翼",},
        [4] = {1,4,1,17,80,"561|174",720000,407,2,408,2,410,2,0,"后翼",},
        [5] = {1,5,1,5,1000,"484|324",720000,109,2,110,2,106,2,0,"中军",},
        [6] = {1,6,1,1,2000,"577|462",720000,205,2,206,2,209,2,0,"先锋",},
        [7] = {1,7,2,14,60,"741|321",720000,0,0,0,0,0,0,500,"大将",},
        [8] = {2,1,1,1,2000,"616|395",720000,308,2,307,2,312,2,0,"前锋",},
        [9] = {2,2,1,7,15000,"870|395",720000,405,2,406,2,412,2,0,"前锋",},
        [10] = {2,3,1,5,1000,"483|325",720000,111,2,112,2,105,2,0,"锋翼",},
        [11] = {2,4,1,6,1000,"1004|325",720000,211,2,212,2,207,2,0,"锋翼",},
        [12] = {2,5,1,15,80,"345|251",720000,306,2,305,2,311,2,0,"锋尾",},
        [13] = {2,6,1,16,80,"1149|251",720000,411,2,412,2,409,2,0,"锋尾",},
        [14] = {2,7,2,8,60,"742|462",720000,0,0,0,0,0,0,500,"锋矢",},
        [15] = {3,1,1,1,3000,"660|464",1080000,301,2,302,3,304,3,0,"天位",},
        [16] = {3,2,1,7,22500,"824|462",1080000,103,2,104,3,109,3,0,"天位",},
        [17] = {3,3,1,6,1500,"397|325",1080000,303,2,304,3,306,3,0,"地位",},
        [18] = {3,4,1,5,1500,"1093|325",1080000,101,2,102,3,106,3,0,"地位",},
        [19] = {3,5,1,17,120,"563|172",1080000,201,2,202,3,212,3,0,"人位",},
        [20] = {3,6,1,18,120,"933|173",1080000,401,2,402,3,407,3,0,"人位",},
        [21] = {3,7,2,14,90,"741|321",1080000,0,0,0,0,0,0,1000,"上将",},
        [22] = {4,1,1,1,3000,"494|463",1080000,403,2,404,3,406,3,0,"日光",},
        [23] = {4,2,1,7,22500,"990|462",1080000,201,2,202,3,206,3,0,"日光",},
        [24] = {4,3,1,6,1500,"397|326",1080000,203,2,204,3,210,3,0,"月华",},
        [25] = {4,4,1,5,1500,"1093|326",1080000,301,2,302,3,308,3,0,"月华",},
        [26] = {4,5,1,15,120,"611|251",1080000,101,2,102,3,104,3,0,"星彩",},
        [27] = {4,6,1,16,120,"877|252",1080000,401,2,402,3,409,3,0,"星彩",},
        [28] = {4,7,2,8,90,"741|321",1080000,0,0,0,0,0,0,1000,"寰宇",},
        [29] = {5,1,1,1,10000,"433|249",3600000,450,1,401,2,410,3,0,"摇光",},
        [30] = {5,2,1,5,5000,"570|324",3600000,351,1,303,2,311,3,0,"开阳",},
        [31] = {5,3,1,6,5000,"700|394",3600000,151,1,103,2,112,3,0,"玉衡",},
        [32] = {5,4,1,7,75000,"830|325",3600000,251,1,203,2,204,3,0,"天权",},
        [33] = {5,5,1,17,400,"966|250",3600000,150,1,101,2,110,3,0,"天玑",},
        [34] = {5,6,1,18,400,"1090|324",3600000,451,1,403,2,408,3,0,"天璇",},
        [35] = {5,7,2,20,300,"1071|461",3600000,0,0,0,0,0,0,2000,"天枢",},
        [36] = {6,1,1,1,10000,"494|465",3600000,350,1,301,2,310,3,0,"惊门",},
        [37] = {6,2,1,5,5000,"522|249",3600000,252,1,201,2,209,3,0,"生门",},
        [38] = {6,3,1,15,400,"617|400",3600000,352,1,303,2,312,3,0,"休门",},
        [39] = {6,4,1,16,400,"878|246",3600000,152,1,103,2,105,3,0,"伤门",},
        [40] = {6,5,1,6,5000,"954|395",3600000,250,1,203,2,211,3,0,"杜门",},
        [41] = {6,6,1,7,75000,"1018|178",3600000,452,1,403,2,405,3,0,"景门",},
        [42] = {6,7,2,19,300,"741|321",3600000,0,0,0,0,0,0,2000,"开门",},
    }
}

-- index
local __index_id_point = {
    ["1_1"] = 1,
    ["1_2"] = 2,
    ["1_3"] = 3,
    ["1_4"] = 4,
    ["1_5"] = 5,
    ["1_6"] = 6,
    ["1_7"] = 7,
    ["2_1"] = 8,
    ["2_2"] = 9,
    ["2_3"] = 10,
    ["2_4"] = 11,
    ["2_5"] = 12,
    ["2_6"] = 13,
    ["2_7"] = 14,
    ["3_1"] = 15,
    ["3_2"] = 16,
    ["3_3"] = 17,
    ["3_4"] = 18,
    ["3_5"] = 19,
    ["3_6"] = 20,
    ["3_7"] = 21,
    ["4_1"] = 22,
    ["4_2"] = 23,
    ["4_3"] = 24,
    ["4_4"] = 25,
    ["4_5"] = 26,
    ["4_6"] = 27,
    ["4_7"] = 28,
    ["5_1"] = 29,
    ["5_2"] = 30,
    ["5_3"] = 31,
    ["5_4"] = 32,
    ["5_5"] = 33,
    ["5_6"] = 34,
    ["5_7"] = 35,
    ["6_1"] = 36,
    ["6_2"] = 37,
    ["6_3"] = 38,
    ["6_4"] = 39,
    ["6_5"] = 40,
    ["6_6"] = 41,
    ["6_7"] = 42,

}

-- metatable
local mt = { 
    __index = function(t, k) 
        assert(__key_map[k], "cannot find " .. k .. " in bout_info")
        return t._raw[__key_map[k]]
    end
}

-- 
function bout_info.length()
    return #bout_info._data
end

-- 
function bout_info.hasKey(k)
    if __key_map[k] == nil then
        return false
    else
        return true
    end
end

--
function bout_info.indexOf(index)
    if index == nil or not bout_info._data[index] then
        return nil
    end

    return setmetatable({_raw = bout_info._data[index]}, mt)
end

--
function bout_info.get(id,point)
    
    local k = id .. '_' .. point
    return bout_info.indexOf(__index_id_point[k])
        
end

--
function bout_info.set(id,point, tkey, nvalue)
    local record = bout_info.get(id,point)
    if record then
        local keyIndex = __key_map[tkey]
        if keyIndex then
            record._raw[keyIndex] = nvalue
        end
    end
end

--
function bout_info.index()
    return __index_id_point
end

return bout_info