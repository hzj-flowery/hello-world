--accountcode

-- key
local __key_map = {
  acode = 1,    --账号-string 
  gender = 2,    --性别1男2女-int 
  name = 3,    --组合名字-string 

}

-- data
local accountcode = {
    _data = {
        [1] = {"test1",1,"测试1",},
        [2] = {"test2",2,"测试2",},
        [3] = {"test3",1,"测试3",},
        [4] = {"test4",2,"测试4",},
        [5] = {"test5",1,"测试5",},
        [6] = {"test6",2,"测试6",},
        [7] = {"test7",1,"测试7",},
        [8] = {"test8",2,"测试8",},
        [9] = {"test9",1,"测试9",},
        [10] = {"test10",2,"测试10",},
        [11] = {"test11",1,"测试11",},
        [12] = {"test12",2,"测试12",},
        [13] = {"test13",1,"测试13",},
        [14] = {"test14",2,"测试14",},
        [15] = {"test15",1,"测试15",},
        [16] = {"test16",2,"测试16",},
        [17] = {"test17",1,"测试17",},
        [18] = {"test18",2,"测试18",},
        [19] = {"test19",1,"测试19",},
        [20] = {"test20",2,"测试20",},
        [21] = {"test21",1,"测试21",},
        [22] = {"test22",2,"测试22",},
        [23] = {"test23",1,"测试23",},
        [24] = {"test24",2,"测试24",},
        [25] = {"test25",1,"测试25",},
        [26] = {"test26",2,"测试26",},
        [27] = {"test27",1,"测试27",},
        [28] = {"test28",2,"测试28",},
        [29] = {"test29",1,"测试29",},
        [30] = {"test30",2,"测试30",},
        [31] = {"test31",1,"测试31",},
        [32] = {"test32",2,"测试32",},
        [33] = {"test33",1,"测试33",},
        [34] = {"test34",2,"测试34",},
        [35] = {"test35",1,"测试35",},
        [36] = {"test36",2,"测试36",},
        [37] = {"test37",1,"测试37",},
        [38] = {"test38",2,"测试38",},
        [39] = {"test39",1,"测试39",},
        [40] = {"test40",2,"测试40",},
        [41] = {"test41",1,"测试41",},
        [42] = {"test42",2,"测试42",},
        [43] = {"test43",1,"测试43",},
        [44] = {"test44",2,"测试44",},
        [45] = {"test45",1,"测试45",},
        [46] = {"test46",2,"测试46",},
        [47] = {"test47",1,"测试47",},
        [48] = {"test48",2,"测试48",},
        [49] = {"test49",1,"测试49",},
        [50] = {"test50",2,"测试50",},
        [51] = {"test51",1,"测试51",},
        [52] = {"test52",2,"测试52",},
        [53] = {"test53",1,"测试53",},
        [54] = {"test54",2,"测试54",},
        [55] = {"test55",1,"测试55",},
        [56] = {"test56",2,"测试56",},
        [57] = {"test57",1,"测试57",},
        [58] = {"test58",2,"测试58",},
        [59] = {"test59",1,"测试59",},
        [60] = {"test60",2,"测试60",},
        [61] = {"test61",1,"测试61",},
        [62] = {"test62",2,"测试62",},
        [63] = {"test63",1,"测试63",},
        [64] = {"test64",2,"测试64",},
        [65] = {"test65",1,"测试65",},
        [66] = {"test66",2,"测试66",},
        [67] = {"test67",1,"测试67",},
        [68] = {"test68",2,"测试68",},
        [69] = {"test69",1,"测试69",},
        [70] = {"test70",2,"测试70",},
        [71] = {"test71",1,"测试71",},
        [72] = {"test72",2,"测试72",},
        [73] = {"test73",1,"测试73",},
        [74] = {"test74",2,"测试74",},
        [75] = {"test75",1,"测试75",},
        [76] = {"test76",2,"测试76",},
        [77] = {"test77",1,"测试77",},
        [78] = {"test78",2,"测试78",},
        [79] = {"test79",1,"测试79",},
        [80] = {"test80",2,"测试80",},
        [81] = {"test81",1,"测试81",},
        [82] = {"test82",2,"测试82",},
        [83] = {"test83",1,"测试83",},
        [84] = {"test84",2,"测试84",},
        [85] = {"test85",1,"测试85",},
        [86] = {"test86",2,"测试86",},
        [87] = {"test87",1,"测试87",},
        [88] = {"test88",2,"测试88",},
        [89] = {"test89",1,"测试89",},
        [90] = {"test90",2,"测试90",},
        [91] = {"test91",1,"测试91",},
        [92] = {"test92",2,"测试92",},
        [93] = {"test93",1,"测试93",},
        [94] = {"test94",2,"测试94",},
        [95] = {"test95",1,"测试95",},
        [96] = {"test96",2,"测试96",},
        [97] = {"test97",1,"测试97",},
        [98] = {"test98",2,"测试98",},
        [99] = {"test99",1,"测试99",},
    }
}

-- index
local __index_acode = {
    ["test1"] = 1,
    ["test10"] = 10,
    ["test11"] = 11,
    ["test12"] = 12,
    ["test13"] = 13,
    ["test14"] = 14,
    ["test15"] = 15,
    ["test16"] = 16,
    ["test17"] = 17,
    ["test18"] = 18,
    ["test19"] = 19,
    ["test2"] = 2,
    ["test20"] = 20,
    ["test21"] = 21,
    ["test22"] = 22,
    ["test23"] = 23,
    ["test24"] = 24,
    ["test25"] = 25,
    ["test26"] = 26,
    ["test27"] = 27,
    ["test28"] = 28,
    ["test29"] = 29,
    ["test3"] = 3,
    ["test30"] = 30,
    ["test31"] = 31,
    ["test32"] = 32,
    ["test33"] = 33,
    ["test34"] = 34,
    ["test35"] = 35,
    ["test36"] = 36,
    ["test37"] = 37,
    ["test38"] = 38,
    ["test39"] = 39,
    ["test4"] = 4,
    ["test40"] = 40,
    ["test41"] = 41,
    ["test42"] = 42,
    ["test43"] = 43,
    ["test44"] = 44,
    ["test45"] = 45,
    ["test46"] = 46,
    ["test47"] = 47,
    ["test48"] = 48,
    ["test49"] = 49,
    ["test5"] = 5,
    ["test50"] = 50,
    ["test51"] = 51,
    ["test52"] = 52,
    ["test53"] = 53,
    ["test54"] = 54,
    ["test55"] = 55,
    ["test56"] = 56,
    ["test57"] = 57,
    ["test58"] = 58,
    ["test59"] = 59,
    ["test6"] = 6,
    ["test60"] = 60,
    ["test61"] = 61,
    ["test62"] = 62,
    ["test63"] = 63,
    ["test64"] = 64,
    ["test65"] = 65,
    ["test66"] = 66,
    ["test67"] = 67,
    ["test68"] = 68,
    ["test69"] = 69,
    ["test7"] = 7,
    ["test70"] = 70,
    ["test71"] = 71,
    ["test72"] = 72,
    ["test73"] = 73,
    ["test74"] = 74,
    ["test75"] = 75,
    ["test76"] = 76,
    ["test77"] = 77,
    ["test78"] = 78,
    ["test79"] = 79,
    ["test8"] = 8,
    ["test80"] = 80,
    ["test81"] = 81,
    ["test82"] = 82,
    ["test83"] = 83,
    ["test84"] = 84,
    ["test85"] = 85,
    ["test86"] = 86,
    ["test87"] = 87,
    ["test88"] = 88,
    ["test89"] = 89,
    ["test9"] = 9,
    ["test90"] = 90,
    ["test91"] = 91,
    ["test92"] = 92,
    ["test93"] = 93,
    ["test94"] = 94,
    ["test95"] = 95,
    ["test96"] = 96,
    ["test97"] = 97,
    ["test98"] = 98,
    ["test99"] = 99,

}

-- metatable
local mt = { 
    __index = function(t, k) 
        assert(__key_map[k], "cannot find " .. k .. " in accountcode")
        return t._raw[__key_map[k]]
    end
}

-- 
function accountcode.length()
    return #accountcode._data
end

-- 
function accountcode.hasKey(k)
    if __key_map[k] == nil then
        return false
    else
        return true
    end
end

--
function accountcode.indexOf(index)
    if index == nil or not accountcode._data[index] then
        return nil
    end

    return setmetatable({_raw = accountcode._data[index]}, mt)
end

--
function accountcode.get(acode)
    
    return accountcode.indexOf(__index_acode[acode])
        
end

--
function accountcode.set(acode, key, value)
    local record = accountcode.get(acode)
    if record then
        local keyIndex = __key_map[key]
        if keyIndex then
            record._raw[keyIndex] = value
        end
    end
end

--
function accountcode.index()
    return __index_acode
end

return accountcode